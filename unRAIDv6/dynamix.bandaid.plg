<?xml version='1.0' standalone='yes'?>

<!DOCTYPE PLUGIN [
<!ENTITY name      "dynamix.bandaid">
<!ENTITY author    "Bergware">
<!ENTITY version   "2015.02.15">
<!ENTITY pluginURL "https://raw.github.com/bergware/dynamix/master/unRAIDv6/dynamix.bandaid.plg">
]>

<PLUGIN  name="&name;" author="&author;" version="&version;" pluginURL="&pluginURL;">

<!--
The bandaid README file.
-->
<FILE Name="/usr/local/emhttp/plugins/&name;/README.md">
<INLINE>
**Dynamix Bandaid**

Temporary Dynamix bandaid to enable background monitoring tasks, enable scheduler upon reboot and initialize array notifications.
</INLINE>
</FILE>

<!--
The 'bandaid' image.
-->
<FILE Name="/usr/local/emhttp/plugins/&name;/images/&name;.png" Type="base64">
<INLINE>
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
</INLINE>
</FILE>

<!--
The 'bandaid' script.
-->
<FILE Run="/bin/bash">
<INLINE>
cron=/tmp/cron.tmp
crontab -l|grep -v '# System monitoring'|grep -v '/usr/local/sbin/monitor'|grep -v '# Plugin version check'|grep -v '/usr/local/sbin/plugincheck'|grep -v '# Scheduled Parity Check'|grep -v '/root/mdcmd check' >$cron

# monitor and plugin check
echo '# System monitoring - check every minute' >>$cron
echo '*/1 * * * * /usr/local/sbin/monitor 1>/dev/null 2>&amp;1' >>$cron
echo '# Plugin version check - run every 6 hours' >>$cron
echo '15 */6 * * * /usr/local/sbin/plugincheck 1>/dev/null 2>&amp;1' >>$cron

# parity check
entry=$(grep -s '^cron=' /boot/config/plugins/dynamix/dynamix.cfg|cut -d'"' -f2)
if [[ -n "$entry" ]]; then
  echo '# Scheduled Parity Check' >>$cron
  echo "$entry"|cut -d"'" -f2 >>$cron
fi

crontab $cron
rm -f $cron
 
# unRAID status update notifications
/usr/local/sbin/notify cron-init
</INLINE>
</FILE>

<!--
The 'remove' script.
-->
<FILE Run="/bin/bash" Method="remove">
<INLINE>
# Remove plugin related files
rm -rf /usr/local/emhttp/plugins/&name;
rm -f /tmp/plugins/&name;.plg
</INLINE>
</FILE>

</PLUGIN>
